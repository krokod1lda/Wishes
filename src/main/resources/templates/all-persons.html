<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="${title}"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/styles.css">
</head>

<body>

<!--Боковая панель-->
<div th:insert="/blocks/sidebar :: sidebar"></div>

<div class="container mt-3">

    <h4 class="mb-3">Все участники</h4>
    <hr class="my-4">

    <div class="table-responsive small mt-3">
        <table class="table table-hover table-sm forTables">
            <thead>
            <tr>
                <th scope="col">Фамилия</th>
                <th scope="col">Имя</th>
                <th scope="col">Отчество</th>
            </tr>
            </thead>

            <div th:each="el : ${map}">

                <td colspan="3" style="background-color: rgba(138,138,138,0.33); font-weight: bold" th:text="${el.getKey()}"></td>

                <tbody>

                <div th:each="el2 : ${el.getValue()}">
                    <tr th:personHref="'/person' + ${el2.id}" style="cursor: pointer">
                        <td th:text="${el2.surname}"/>
                        <td th:text="${el2.name}"/>
                        <td th:text="${el2.patronymic}"/>
                    </tr>
                </div>

                </tbody>
            </div>
        </table>
    </div>
</div>

<!-- Футер страницы -->
<footer th:insert="blocks/footer :: footer"></footer>

</body>

<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

<script>
    const tableRows = document.querySelectorAll('tr[personHref]');

    tableRows.forEach(row => {
        row.addEventListener('click', () => {
            const url = row.getAttribute('personHref');
            window.location.href = url;
        });
    });
</script>

</html>